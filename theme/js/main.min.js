/*!
* main.js - v0.1.6 - 2015-10-01
* http://yyx.me
* Copyright (c) 2015 GreatYYX
*/
$(document).ready(function(){var g,h,i,b=$(".navbar").outerHeight(!0),c=$("#main-container"),e=768;$(document).on("click",'a[href="#"]',function(a){a.preventDefault()}),g=function(){var h,i,j,k,l,m,n,o,a=$(window).height(),d=$(window).width(),f=$("#welcome");$("body").height(),0==f.length?($("#nav-main").addClass("navbar-fixed-top"),c.addClass("compensate"),$(".blog-footer").addClass("compensate")):e>d?($(".shadow").remove(),f.remove(),$("#nav-main").addClass("navbar-fixed-top"),c.addClass("compensate"),$(".blog-footer").addClass("compensate")):($("body").css("height","auto"),$("html").css("height","auto"),$("#wrapper").css("display","none"),f.css("height",a+"px"),$("body, html").addClass("hide-scrollbar").addClass("bgimg"),$("#welcome .logo").css("margin-top",a/3+"px"),$(".shadow").fadeOut(1e3,function(){$(".shadow").remove()}),$("#welcome #open").click(function(b){b.preventDefault(),b.stopPropagation(),$("#wrapper").css("display",""),$("body, html").animate({scrollTop:a},2e3,complete=function(){$("#nav-main").addClass("navbar-fixed-top"),c.addClass("compensate"),$(".blog-footer").addClass("compensate"),$("body").css("height","100%"),$("html").css("height","100%"),f.remove(),$("body, html").scrollTop(0),$("body, html").removeClass("hide-scrollbar").removeClass("bgimg")})})),h=$("#blog-sidebar"),i=h.width(),j=$("#sidebar-fix"),j.css("width",i),0!=$("#toc").length&&d>=e&&$("#toc").tocify({context:".blog-post",selectors:"h1, h2, h3",theme:"bootstrap",scrollTo:b,extendPage:!1,hashGenerator:"pretty"}).data("toc-tocify"),0==$("#disqus_thread").length?$("#btn-comment").addClass("hide"):$("#btn-comment").removeClass("hide"),hljs.configure({tabReplace:"    "}),$("pre code").each(function(a,b){hljs.highlightBlock(b)}),$(".blog-post a").each(function(){var a=new RegExp("/"+window.location.host+"/");a.test(this.href)||$(this).attr("target")||($(this).attr("target","_blank"),$(this).append('<i class="fa fa-external-link-square"></i>'))}),k=$(".blog-post").width(),$(".blog-post img").each(function(){$(this).css("max-width",k)}),$(".blog-post img").each(function(){var a=$(this).attr("src");$(this).addClass("img-responsive"),$(this).wrap('<a data-toggle="lightbox" data-gallery="blog-img" data-remote="'+a+'"></a>')}),$(document).delegate('*[data-toggle="lightbox"]',"click",function(a){a.preventDefault(),$(this).ekkoLightbox()}),l=$(".blog-post #lang-cn"),m=$(".lang-btn #lang-btn-cn"),n=$(".blog-post #lang-en"),o=$(".lang-btn #lang-btn-en"),m.click(function(){l.hasClass("active")||(n.addClass("hide"),o.removeClass("active"),l.removeClass("hide"),m.addClass("active"))}),o.click(function(){n.hasClass("active")||(l.addClass("hide"),m.removeClass("active"),n.removeClass("hide"),o.addClass("active"))})},g(),$(window).resize(function(){}),$(window).scroll(function(){b<$(document).scrollTop()?$("#btn-top").removeClass("hide"):$("#btn-top").addClass("hide")}),$("#btn-top").click(function(){$("body, html").animate({scrollTop:0},300)}),$("#btn-top").tooltip({placement:"left"}),$("#btn-comment").click(function(){var a=$("#disqus_thread").offset().top;$("body, html").animate({scrollTop:a},300)}),$("#btn-comment").tooltip({placement:"left"}),$(".navbar-collapse").collapse({toggle:!1}),$("#loading").modal({keyboard:!1,backdrop:"static",show:!1}),$(document).on("click","a[data-pjax]",function(a){a.preventDefault(),$(".navbar-collapse").collapse("hide");var b=$(this).attr("href");window.location.href!=b&&$.pjax({url:b,container:"#main-container",fragment:"#main-container"})}),$(document).on("pjax:start",function(){$("#loading").modal("show"),$(".loader").css("display","block"),$("#end-of-page").nextAll().remove()}),$(document).on("pjax:success",function(){g(),$(".loader").css("display","none"),$("#loading").modal("hide")}),h=$("div.i404-img").width(),i=$(window).height(),$(".i404-wl").css({height:.2*i}),$(".i404 img").css({width:h})});