/*!
* main.js - v0.1.1 - 2014-09-10
* http://yyx.name
* Copyright (c) 2014 GreatYYX
*/
$(document).ready(function(){var g,h,i,b=$(".navbar").outerHeight(!0),c=$("#main-container"),d=50,e=768;$(document).on("click",'a[href="#"]',function(a){a.preventDefault()}),g=function(){var h,i,j,k,l,m,n,a=$(window).height(),f=$(window).width(),g=$("#welcome");c.removeAttr("style"),h=$("body").height()-g.outerHeight(!0),a>h&&(i=a-$(".blog-footer").outerHeight(!0)-d,c.css("height",i)),0==g.length?($("#nav-main").addClass("navbar-fixed-top"),c.addClass("margintop")):e>f?($(".shadow").remove(),g.remove(),$("#nav-main").addClass("navbar-fixed-top"),c.addClass("margintop")):(g.css("height",a+"px"),$("body, html").addClass("hide-scrollbar").addClass("bgimg"),$("#welcome .logo").css("margin-top",a/3+"px"),$(".shadow").fadeOut(1e3,function(){$(".shadow").remove()}),$("#welcome #open").click(function(b){b.preventDefault(),b.stopPropagation(),$("body, html").animate({scrollTop:a},2e3,complete=function(){$("#nav-main").addClass("navbar-fixed-top"),c.addClass("margintop"),g.remove(),$("body, html").scrollTop(0),$("body, html").removeClass("hide-scrollbar").removeClass("bgimg")})})),j=$("#sidebar-fix"),k=j.width(),j.css("width",k),j.affix({offset:{top:b}}),0!=$("#toc").length&&f>=e&&(l=a-$("#toc").offset().top-$(".blog-footer").outerHeight(!0),m=.9*l,$("#toc").css("max-height",m),$("#toc").tocify({context:".blog-post",selectors:"h1, h2, h3",theme:"bootstrap",scrollTo:b,extendPage:!1,hashGenerator:"pretty"}).data("toc-tocify")),0==$("#disqus_thread").length?$("#btn-comment").addClass("hide"):$("#btn-comment").removeClass("hide"),hljs.configure({tabReplace:"    "}),$("pre code").each(function(a,b){hljs.highlightBlock(b)}),$(".blog-post a").each(function(){var a=new RegExp("/"+window.location.host+"/");a.test(this.href)||$(this).attr("target")||($(this).attr("target","_blank"),$(this).append('<i class="fa fa-external-link-square"></i>'))}),n=$(".blog-post").width(),$(".blog-post img").each(function(){$(this).css("max-width",n)})},g(),$(window).resize(function(){}),$(window).scroll(function(){b<$(document).scrollTop()?$("#btn-top").removeClass("hide"):$("#btn-top").addClass("hide")}),$("#btn-top").click(function(){$("body, html").animate({scrollTop:0},300)}),$("#btn-top").tooltip({placement:"left"}),$("#btn-comment").click(function(){var a=$("#disqus_thread").offset().top;$("body, html").animate({scrollTop:a},300)}),$("#btn-comment").tooltip({placement:"left"}),$(".navbar-collapse").collapse({toggle:!1}),$("#loading").modal({keyboard:!1,backdrop:"static",show:!1}),$(document).on("click","a[data-pjax]",function(a){a.preventDefault(),$(".navbar-collapse").collapse("hide");var b=$(this).attr("href");window.location.href!=b&&$.pjax({url:b,container:"#main-container",fragment:"#main-container"})}),$(document).on("pjax:start",function(){$("#loading").modal("show"),$(".loader").css("display","block")}),$(document).on("pjax:end",function(){g(),$(".loader").css("display","none"),$("#loading").modal("hide")}),h=$("div.i404-img").width(),i=$(window).height(),$(".i404-wl").css({height:.2*i}),$(".i404 img").css({width:h})});